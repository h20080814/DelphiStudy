program Project1;

{$APPTYPE CONSOLE}

{$R *.res}
{*------------------------------------------------------------------------------
  多态：一类事物以多种形态存在。例如：动物类和狗类、猫类的关系
  前提：两个类具备继承（派生）和实现这两种关系的一种。具体体现是父类接收或指向其子类对象
  面向对象主要有三个特征：封装、继承、多态
  作用：提高代码的复用性，方便我们对代码进行解耦（类和类之间不要出现直接的依赖关系）
  运行期类型信息（RTTI)：是一种语言特征，能使应用程序在运行时得到关于对象的信息，是Delphi组件能够融合到IDE中的关键。
   TObjiect的一些方法：
   ClassName() 返回string 返回值 对象的类名
   ClassType() 返回boolean 返回值 对象的类型
   InheritsFrom() 返回boolean 返回值 判断对象是否继承于一个指定的类
   ClassParent() 返回TClass 返回值 对象祖先类型
   Instancesize() 返回word 返回值 对象实例的长度（字节数）
   ClassInfo() 返回Pointer 返回值 指向RTTI的指针

-------------------------------------------------------------------------------}
uses
  System.SysUtils,
  Unit1 in 'Unit1.pas';

procedure ShowAnimalRun(Animal: TAnimal);  //向上转型：把子类对象的类型转换成了父类的数据类型
var
  Dog: TDog;
  Cat: TCat;
begin
  //运行时的数据类型
  Animal.Run;
  //强制转换数据类型
  Writeln(Animal.ClassName);
  //Writeln(Animal.ClassType);
  Writeln(Animal.InheritsFrom(TCat));
  //Writeln(Animal.ClassParen(TDog));
  Writeln(Animal.Instancesize);
  //Writeln(Animal.ClassInfo(TDog));
  if Animal.ClassName = 'TDog' then begin
    Dog := TDog(Animal);
    Dog.LookDoor; //向下转型：把父类对象的类型转换成子类的数据类型
  end
  else begin
    Cat := TCat(Animal);
    Cat.CatchMice;
  end;

end;
//var
  //Animal: TAnimal;
  //ColorDog: TColor;



begin
  ShowAnimalRun(TDog.create());  //狗在跑
  ShowAnimalRun(TCat.create());  //猫在跑
  //Animal := TDog.create();
  //Animal := TCat.Create();
  //Animal.Run;
  //ColorDog := TDog.Create;
  Readln;
end.

